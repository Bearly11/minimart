{% extends "master.html" %}
{% block main_content %}


<div id="app" class="container" style="max-width:800px">
  <h4 class="mb-3">Create Sale / Invoice</h4>

  <form method="post" action="/create_sale" @submit="clearStorage">
    <div v-for="(item, index) in items" :key="index" class="row mb-3">
      <div class="col-md-6">
        <label>Product Name</label>
        <select name="product_name[]" v-model="item.product_name" class="form-control" required>
          <option value="">-- Select Product --</option>
          {% for p in name %}
            <option value="{{ p.product_name }}">{{ p.product_name }}</option>
          {% endfor %}
        </select>
      </div>

      <div class="col-md-4">
        <label>Quantity</label>
        <input type="number" name="quantity[]" v-model="item.quantity" min="1" class="form-control" required>
      </div>

      <div class="col-md-2 d-flex align-items-end">
        <button type="button" class="btn btn-danger w-100" @click="removeItem(index)" v-if="items.length > 1">
          Remove
        </button>
      </div>
    </div>

    <div class="mb-3">
      <button type="button" class="btn btn-secondary" @click="addItem">+ Add Product</button>
    </div>

    <div class="d-flex gap-2">
      <button class="btn btn-primary" >Create Sale</button>
      <a href="/sales_form" class="btn btn-light" @click="clearStorage">Cancel</a>
    </div>
  </form>
</div>



{% endblock %}
